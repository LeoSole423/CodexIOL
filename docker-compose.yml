services:
  iol:
    build: .
    container_name: iol-cli
    restart: unless-stopped
    env_file:
      - .env
    environment:
      - TZ=America/Argentina/Buenos_Aires
    volumes:
      - ./:/app
    working_dir: /app
    command: ["tail", "-f", "/dev/null"]
  scheduler:
    build: .
    container_name: iol-scheduler
    restart: unless-stopped
    env_file:
      - .env
    environment:
      - TZ=America/Argentina/Buenos_Aires
    volumes:
      - ./:/app
    working_dir: /app
    command: ["sh", "/app/scripts/scheduler_entrypoint.sh"]
  web:
    build: .
    container_name: iol-web
    restart: unless-stopped
    env_file:
      - .env
    environment:
      - TZ=America/Argentina/Buenos_Aires
    volumes:
      - ./:/app
    working_dir: /app
    ports:
      - "8000:8000"
    command: ["uvicorn", "iol_web.app:app", "--host", "0.0.0.0", "--port", "8000"]
